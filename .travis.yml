language: java # set desired language

sudo: true
dist: trusty

jdk:
  - oraclejdk8
addons:
apt:
  sources:
    - google-chrome
  packages:
    - google-chrome-stable

addons:
   firefox: "52.0.2" # if your project contains tests need to be run on firefox include these lines


before_install:

  - "/sbin/start-stop-daemon --start --quiet --pidfile /tmp/custom_xvfb_99.pid --make-pidfile --background --exec /usr/bin/Xvfb -- :99 -ac -screen 0 1280x1024" # running virtual display on desired port with desired settings
  #- sleep 3


before_script:
  # Selenium server
  - "export DISPLAY=:99.0"
  - "sh -e /etc/init.d/xvfb start"
  #- wget https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb
  #- sudo dpkg -i google-chrome*.deb
  - sleep 3
  - sudo apt-get update > /dev/null
  - java -jar selenium-server-standalone-3.0.1.jar > /dev/null 2>/dev/null & # starting selenium-server
  - sleep 10

script:
  - echo "Extracting firefox and setting PATH variable..."
  - tar -xjf /tmp/firefox-52.0.2.tar.bz2 --directory /tmp
  - export PATH="/tmp/firefox:$PATH"
  - echo "Using firefox version `firefox --version`"
  - chmod +x /home/travis/build/Orfik/N2PS-AutoTests/src/test/resources/geckodriver_v.14
  - export PATH="$HOME/.chrome/chromium/chrome-linux/chrome:$PATH"
  - echo "Using chrome version `chrome --version`"
  - chmod +x /home/travis/build/Orfik/N2PS-AutoTests/src/test/resources/chromedriver
  - mvn help:active-profiles
  - mvn test
  - mvn site
  #- mvn jetty:run
deploy:
  provider: releases
  user: "Orfik"
  password:
   secure: ec17mSja1WmQ2gymsnNlEe35Sl4sIsjYT5svvKwfbkq4bIZHXWpOmG0jSkJY8UVV4fq5rp+YRn7FwIWH9K+VFwdA31peHuOKfDdCHBcxkDKfqN54s/Hl4S9X1QYhe8lwFXRJxnyhyjUCdkDbVNyp/J2g5HUZN62lC1AJFPJAWAqPz5Tu6j09Z7wRJjyDDF40H8z+8CCmIx6BPtg0Mqu5ysA7oqjEZh7AdHA0e4d4/zMxo7qdWZoKtlsMnI6Fx6vxTowYerJbn2/dCqOm3ErVhE33V3r1KqCvdD/JhL2xhJFS+rXINv2SZtS4+o2WaNLn0pc1erVuSwVP+TbvG1UT7yyzg646U6uWT9djzEhm5zt82q988o+tQpc/8ddhnRypFkaZZBt4U8lf3Yh6PEbBByltpvKaW7BmJQmLS1kwpWCi8TvegQRM9qas1SA0kzwzEPZuwH30aklrP+HLlwNIybNpibXxSsRbTAyoDGPHmAClKz/P9y7DRwPDPUpx9/BxJmUxwSSYSbuxb2L2P9/xbwOZrM/8CETw4biyWhO2Ty2WgItIy+VcV1r+4vbWmjnDD/BiBN5G4qF8mBtRtnZY6gCurf38KvdjELI3L6KoayE3JDzsSRZ8FrxQIQp02iUL/y0T07v5kxTatPoYbx/7nvKAfOecPMBmLHRkDucpV3Y=
  file: "/home/travis/build/Orfik/N2PS-AutoTests/target/site/allure-maven-plugin/"
  skip_cleanup: true
  on:
  tags: true
  repo: Orfik/N2PS-AutoTests


